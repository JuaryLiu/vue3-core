{"code":"import { isFunction } from \"@vue/shared\";\nimport { effect } from \"./effect\";\n// computed计算属性有两个参数，一个是\nexport function computed(getterOrOptions) {\n    let getter;\n    let setter;\n    if (isFunction(getterOrOptions)) {\n        getter = getterOrOptions;\n        setter = () => {\n            console.warn('computed value must be readonly');\n        };\n    }\n    else {\n        getter = getterOrOptions.get;\n        setter = getterOrOptions.set;\n    }\n    return new ComputedRefImpl(getter, setter);\n}\nclass ComputedRefImpl {\n    setter;\n    _v_isReadonly = true;\n    _v_isRef = true;\n    _dirty = true;\n    _value;\n    effect;\n    constructor(getter, setter) {\n        this.setter = setter;\n        this.effect = effect(getter, {\n            lazy: true,\n            sch: () => {\n                if (!this._dirty) {\n                    this._dirty = true;\n                }\n            }\n        });\n    }\n    get value() {\n        // 获取执行\n        if (this._dirty) {\n            this._value = this.effect();\n            this._dirty = false;\n        }\n        return this._value;\n    }\n    set value(newValue) {\n        this.setter(newValue);\n    }\n}\n//# sourceMappingURL=computed.js.map","references":["C:/Users/JuaryLiu/Desktop/vue3-core/packages/shared/src/index.ts","C:/Users/JuaryLiu/Desktop/vue3-core/packages/reactivity/src/effect.ts"],"map":"{\"version\":3,\"file\":\"computed.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/computed.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AACzC,OAAO,EAAE,MAAM,EAAE,MAAM,UAAU,CAAC;AAElC,wBAAwB;AACxB,MAAM,UAAU,QAAQ,CAAC,eAAmB;IACxC,IAAI,MAAM,CAAC;IACX,IAAI,MAAM,CAAC;IACX,IAAI,UAAU,CAAC,eAAe,CAAC,EAAE;QAC7B,MAAM,GAAG,eAAe,CAAA;QACxB,MAAM,GAAG,GAAG,EAAE;YACV,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAA;QACnD,CAAC,CAAA;KACJ;SAAM;QACH,MAAM,GAAG,eAAe,CAAC,GAAG,CAAA;QAC5B,MAAM,GAAG,eAAe,CAAC,GAAG,CAAA;KAC/B;IACD,OAAO,IAAI,eAAe,CAAC,MAAM,EAAC,MAAM,CAAC,CAAA;AAC7C,CAAC;AAED,MAAM,eAAe;IAMkB;IAL5B,aAAa,GAAG,IAAI,CAAA;IACpB,QAAQ,GAAG,IAAI,CAAA;IACf,MAAM,GAAG,IAAI,CAAA;IACb,MAAM,CAAK;IACX,MAAM,CAAI;IACjB,YAAY,MAAe,EAAQ,MAAe;QAAf,WAAM,GAAN,MAAM,CAAS;QAC9C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,EAAC;YACxB,IAAI,EAAC,IAAI;YACT,GAAG,EAAE,GAAG,EAAE;gBACN,IAAG,CAAC,IAAI,CAAC,MAAM,EAAE;oBACb,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;iBACrB;YACL,CAAC;SACJ,CAAC,CAAA;IAEN,CAAC;IACD,IAAI,KAAK;QACL,OAAO;QACP,IAAG,IAAI,CAAC,MAAM,EAAE;YACd,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA;YAC3B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;SACpB;QACD,OAAO,IAAI,CAAC,MAAM,CAAA;IACtB,CAAC;IACD,IAAI,KAAK,CAAC,QAAQ;QACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;IACzB,CAAC;CACJ\"}"}
