{"code":"import { hasChanged, isArray } from \"@vue/shared\";\nimport { Track, trigger } from \"./effect\";\nexport function ref(rawValue) {\n    return createRef(rawValue);\n}\nexport function shallowRef(rawValue) {\n    return createRef(rawValue, true);\n}\n// 创建RefImpl类\nclass RefImpl {\n    rawValue;\n    shallow;\n    // 属性\n    _v_isRef = true;\n    _value;\n    constructor(rawValue, shallow) {\n        this.rawValue = rawValue;\n        this.shallow = shallow;\n        this._value = rawValue;\n    }\n    // 类的属性访问器\n    get value() {\n        Track(this, \"get\" /* TrackOpTypes.GET */, 'value');\n        return this._value;\n    }\n    set value(newValue) {\n        if (hasChanged(newValue, this._value)) {\n            this._value = newValue;\n            this.rawValue = newValue;\n            trigger(this, \"set\" /* TriggerOpTypes.SET */, 'value', newValue);\n        }\n    }\n}\nfunction createRef(rawValue, shallow = false) {\n    return new RefImpl(rawValue, shallow);\n}\n// toRef 将我们的目标对象的某个属性变成 ref，如果这个属性目标对象不是响应式，那么toRef也不具备响应式\nexport function toRef(target, key) {\n    return new ObjectRefImpl(target, key);\n}\nclass ObjectRefImpl {\n    target;\n    key;\n    _v_isRef = true;\n    _object;\n    constructor(target, key) {\n        this.target = target;\n        this.key = key;\n        this._object = target[key];\n    }\n    get value() {\n        return this._object;\n    }\n    set value(newValue) {\n        this._object = newValue;\n        this.target[this.key] = newValue;\n    }\n}\n// toRefs 将将我们的目标对象的所有属性变成 ref\nexport function toRefs(target) {\n    let res = isArray(target) ? new Array(target.length) : {};\n    for (let key in target) {\n        res[key] = toRef(target, key);\n    }\n    return res;\n}\n//# sourceMappingURL=ref.js.map","references":["C:/Users/JuaryLiu/Desktop/vue3-core/packages/shared/src/index.ts","C:/Users/JuaryLiu/Desktop/vue3-core/packages/reactivity/src/effect.ts","C:/Users/JuaryLiu/Desktop/vue3-core/packages/reactivity/src/operations.ts"],"map":"{\"version\":3,\"file\":\"ref.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/ref.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,aAAa,CAAA;AACjD,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AAGzC,MAAM,UAAU,GAAG,CAAC,QAAY;IAC5B,OAAO,SAAS,CAAC,QAAQ,CAAC,CAAA;AAC9B,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,QAAY;IACnC,OAAO,SAAS,CAAC,QAAQ,EAAC,IAAI,CAAC,CAAA;AACnC,CAAC;AAED,aAAa;AACb,MAAM,OAAO;IAIU;IAAoB;IAHvC,KAAK;IACE,QAAQ,GAAG,IAAI,CAAA;IACf,MAAM,CAAI;IACjB,YAAmB,QAAY,EAAQ,OAAe;QAAnC,aAAQ,GAAR,QAAQ,CAAI;QAAQ,YAAO,GAAP,OAAO,CAAQ;QACpD,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAA;IACxB,CAAC;IACD,UAAU;IACV,IAAI,KAAK;QACL,KAAK,CAAC,IAAI,gCAAkB,OAAO,CAAC,CAAA;QACpC,OAAO,IAAI,CAAC,MAAM,CAAA;IACtB,CAAC;IACD,IAAI,KAAK,CAAC,QAAQ;QACd,IAAG,UAAU,CAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YACjC,IAAI,CAAC,MAAM,GAAE,QAAQ,CAAA;YACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;YACxB,OAAO,CAAC,IAAI,kCAAoB,OAAO,EAAC,QAAQ,CAAC,CAAA;SACpD;IAEL,CAAC;CACJ;AAED,SAAS,SAAS,CAAC,QAAY,EAAC,OAAO,GAAC,KAAK;IACzC,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAC,OAAO,CAAC,CAAA;AACxC,CAAC;AAGD,2DAA2D;AAC3D,MAAM,UAAU,KAAK,CAAC,MAAU,EAAC,GAAO;IACpC,OAAO,IAAI,aAAa,CAAC,MAAM,EAAC,GAAG,CAAC,CAAA;AACxC,CAAC;AAED,MAAM,aAAa;IAGI;IAAmB;IAF/B,QAAQ,GAAG,IAAI,CAAA;IACf,OAAO,CAAI;IAClB,YAAmB,MAAU,EAAS,GAAO;QAA1B,WAAM,GAAN,MAAM,CAAI;QAAS,QAAG,GAAH,GAAG,CAAI;QACzC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;IAC9B,CAAC;IACD,IAAI,KAAK;QACL,OAAO,IAAI,CAAC,OAAO,CAAA;IACvB,CAAC;IACD,IAAI,KAAK,CAAC,QAAQ;QACd,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAA;QACvB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAA;IACpC,CAAC;CACJ;AAGD,8BAA8B;AAC9B,MAAM,UAAU,MAAM,CAAC,MAAU;IAC7B,IAAI,GAAG,GAAO,OAAO,CAAC,MAAM,CAAC,CAAA,CAAC,CAAA,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA,CAAC,CAAA,EAAE,CAAA;IACzD,KAAI,IAAI,GAAG,IAAI,MAAM,EAAE;QACnB,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,EAAC,GAAG,CAAC,CAAA;KAC/B;IACD,OAAO,GAAG,CAAA;AACd,CAAC\"}"}
