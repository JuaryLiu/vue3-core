{"code":"//四个方法的注重点 ： 1.是不是可读 2.是不是深代理\n// 核心proxy 源码中采用高阶函数的柯里化\nimport { isObject } from \"@vue/shared\";\nimport { reactiveHandlers, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHandlers } from './baseHandlers';\nexport function reactive(target) {\n    return createReactObj(target, false, reactiveHandlers);\n}\nexport function shallowReactive(target) {\n    return createReactObj(target, false, shallowReactiveHandlers);\n}\nexport function readonly(target) {\n    return createReactObj(target, true, readonlyHandlers);\n}\nexport function shallowReadonly(target) {\n    return createReactObj(target, true, shallowReadonlyHandlers);\n}\n//核心代理的实现\n//数据结构，用来收集被代理的数据，避免重复代理\nconst reactiveMap = new WeakMap(); // 类似于map，但是这个key必须是对象，并且会自动的垃圾回收\nconst readonlyMap = new WeakMap();\nfunction createReactObj(target, isReadonly, baseHandlers) {\n    if (!isObject(target)) {\n        return target;\n    }\n    const proxymap = isReadonly ? readonlyMap : reactiveMap;\n    const proxyEs = proxymap.get(target); //proxymap中是否存在被代理的target\n    if (proxyEs) {\n        return proxyEs;\n    }\n    const proxy = new Proxy(target, baseHandlers);\n    proxymap.set(target, proxy);\n    return proxy;\n}\n//# sourceMappingURL=reactivety.js.map","references":["C:/Users/JuaryLiu/Desktop/vue3-core/packages/shared/src/index.ts","C:/Users/JuaryLiu/Desktop/vue3-core/packages/reactivity/src/baseHandlers.ts"],"map":"{\"version\":3,\"file\":\"reactivety.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/reactivety.ts\"],\"names\":[],\"mappings\":\"AAAA,6BAA6B;AAC7B,wBAAwB;AACxB,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAA;AACtC,OAAO,EACH,gBAAgB,EAChB,gBAAgB,EAChB,uBAAuB,EACvB,uBAAuB,EACxB,MAAM,gBAAgB,CAAA;AACzB,MAAM,UAAU,QAAQ,CAAC,MAAa;IACnC,OAAO,cAAc,CAAC,MAAM,EAAC,KAAK,EAAC,gBAAgB,CAAC,CAAA;AACvD,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,MAAa;IACzC,OAAO,cAAc,CAAC,MAAM,EAAC,KAAK,EAAC,uBAAuB,CAAC,CAAA;AAC/D,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,MAAa;IAClC,OAAO,cAAc,CAAC,MAAM,EAAC,IAAI,EAAC,gBAAgB,CAAC,CAAA;AACvD,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,MAAa;IACzC,OAAO,cAAc,CAAC,MAAM,EAAC,IAAI,EAAC,uBAAuB,CAAC,CAAA;AAC9D,CAAC;AAED,SAAS;AACT,wBAAwB;AACxB,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA,CAAC,iCAAiC;AACnE,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;AACjC,SAAS,cAAc,CAAC,MAAU,EAAC,UAAkB,EAAC,YAAmB;IACrE,IAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QAClB,OAAO,MAAM,CAAA;KAChB;IACL,MAAM,QAAQ,GAAG,UAAU,CAAA,CAAC,CAAA,WAAW,CAAA,CAAC,CAAA,WAAW,CAAA;IACnD,MAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA,CAAC,yBAAyB;IAC9D,IAAG,OAAO,EAAE;QACR,OAAO,OAAO,CAAA;KACjB;IAED,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAC,YAAY,CAAC,CAAA;IAC5C,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAC,KAAK,CAAC,CAAA;IACxB,OAAO,KAAK,CAAA;AACd,CAAC\"}"}
